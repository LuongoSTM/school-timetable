<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>St Thomas More Timetable 2025-2026</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Text:wght@400&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
</head>
<body class="authenticated">
    <div id="login-page">
        <h2>Login</h2>
        <div class="login-group">
            <label for="username">Username</label>
            <input type="text" id="username" placeholder="e.g., Administrator">
        </div>
        <div class="login-group">
            <label for="password">Password</label>
            <input type="password" id="password" placeholder="Enter password">
        </div>
        <button class="login-btn" id="login-btn">Login</button>
        <div class="error-msg" id="login-error"></div>
    </div>
    <!-- PAGINA REQUESTS con navbar -->
    <div id="requests-page">
        <div class="header-content-box">
            <div class="header">
                <div class="clock-section">
                    <div class="clock-title">St Thomas More Time</div>
                    <div class="clock-container">
                        <div class="clock-box">
                            <div class="clock-value" id="requests-hours">00</div>
                            <div class="clock-label">Hours</div>
                        </div>
                        <div class="clock-box">
                            <div class="clock-value" id="requests-minutes">00</div>
                            <div class="clock-label">Minutes</div>
                        </div>
                        <div class="clock-box">
                            <div class="clock-value" id="requests-seconds">00</div>
                            <div class="clock-label">Seconds</div>
                        </div>
                    </div>
                    <div class="logged-in-user-box">
                        Logged in as: <span id="requests-logged-in-user">Guest</span>
                    </div>
                </div>
                <div class="title-section">
                    <div class="title">Time Table 2025-2026</div>
                    <div class="date-info" id="requests-date-info">Loading...</div>
                </div>
                <div class="countdown-section">
                    <div class="countdown-title-wrapper">
                        <div class="countdown-title-row">
                            <div class="countdown-title" id="requests-countdown-title">October Half Term</div>
                            <div id="requests-week-info">Current Week: A</div>
                        </div>
                    </div>
                    <div class="countdown-row">
                        <div class="countdown-box">
                            <div class="countdown-value" id="requests-countdown-days">000</div>
                            <div class="clock-label">Days</div>
                        </div>
                        <div class="countdown-box">
                            <div class="countdown-value" id="requests-countdown-hours">00</div>
                            <div class="clock-label">Hours</div>
                        </div>
                        <div class="countdown-box">
                            <div class="countdown-value" id="requests-countdown-minutes">00</div>
                            <div class="clock-label">Minutes</div>
                        </div>
                        <div class="countdown-box">
                            <div class="countdown-value" id="requests-countdown-seconds">00</div>
                            <div class="clock-label">Seconds</div>
                        </div>
                    </div>
                    <div class="countdown-lower-row">
                        <div class="term-info-box" id="requests-term-info-box">
                            Loading...
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <nav class="navbar">
            <div class="nav-main">
                <a href="#" class="nav-item" id="requests-nav-home">
                    <div class="icon-wrapper">
                        <svg class="nav-icon home-icon" viewBox="0 0 100 100">
                            <path class="roof" d="M20,55 L50,25 L80,55" stroke-width="8" stroke-linecap="round" stroke-linejoin="round"/>
                            <rect x="30" y="55" width="40" height="25" rx="3" stroke-width="8"/>
                            <rect class="door" x="45" y="65" width="10" height="15" rx="2"/>
                        </svg>
                    </div>
                    <span>Home</span>
                </a>
                <a href="#" class="nav-item" id="requests-nav-timetable">
                    <div class="icon-wrapper">
                        <svg class="nav-icon timetable-icon" viewBox="0 0 100 100">
                            <rect class="page" x="15" y="20" width="70" height="60" rx="8" stroke-width="8"/>
                            <line x1="30" y1="35" x2="70" y2="35" stroke-width="4" stroke-linecap="round"/>
                            <line x1="30" y1="50" x2="70" y2="50" stroke-width="4" stroke-linecap="round"/>
                            <line x1="30" y1="65" x2="55" y2="65" stroke-width="4" stroke-linecap="round"/>
                            <circle cx="25" cy="35" r="4"/>
                            <circle cx="25" cy="50" r="4"/>
                            <circle cx="25" cy="65" r="4"/>
                        </svg>
                    </div>
                    <span>Timetable</span>
                </a>
                <a href="#" class="nav-item" id="requests-nav-exam-clock">
                    <div class="icon-wrapper">
                        <svg class="nav-icon clock-icon" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="40" stroke-width="8"/>
                            <circle cx="50" cy="50" r="4"/>
                            <line class="hand" x1="50" y1="50" x2="50" y2="30" stroke-width="6" stroke-linecap="round"/>
                            <line x1="50" y1="50" x2="65" y2="50" stroke-width="4" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <span>Exam Clock</span>
                </a>
                <a href="#" class="nav-item" id="requests-stats-nav">
                    <div class="icon-wrapper">
                        <svg class="nav-icon data-icon" viewBox="0 0 100 100">
                            <rect class="bar bar-1" x="25" y="70" width="6" height="0" rx="2"/>
                            <rect class="bar bar-2" x="38" y="70" width="6" height="0" rx="2"/>
                            <rect class="bar bar-3" x="51" y="70" width="6" height="0" rx="2"/>
                            <rect class="bar bar-4" x="64" y="70" width="6" height="0" rx="2"/>
                            <path d="M20,80 L80,80" stroke-width="4" stroke-linecap="round"/>
                            <path d="M20,80 L20,30" stroke-width="4" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <span>Statistics</span>
                </a>
                <a href="#" class="nav-item" id="requests-reminders-nav">
                    <div class="icon-wrapper">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M16 4v4a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V4m8 16H8a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2z"/>
                            <path d="M9 12h6"/>
                            <path d="M9 16h6"/>
                        </svg>
                    </div>
                    <span>My Reminders</span>
                </a>
                <a href="#" class="nav-item requests-active" id="requests-nav-current">
                    <div class="icon-wrapper">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                            <line x1="16" y1="13" x2="8" y2="13"/>
                            <line x1="16" y1="17" x2="8" y2="17"/>
                            <polyline points="10 9 9 9 8 9"/>
                        </svg>
                    </div>
                    <span>Lesson Request</span>
                </a>
            </div>
            <div class="nav-controls">
                <select id="requests-day-filter-select">
                    <option value="all">All Days</option>
                    <option value="MONDAY">Monday</option>
                    <option value="TUESDAY">Tuesday</option>
                    <option value="WEDNESDAY">Wednesday</option>
                    <option value="THURSDAY">Thursday</option>
                    <option value="FRIDAY">Friday</option>
                </select>
                <select id="requests-week-selector">
                    <option value="auto">Automatic</option>
                    <option value="A">Week A</option>
                    <option value="B">Week B</option>
                </select>
                <button id="requests-fullscreen-btn" class="fullscreen-btn">
                    <span>‚õ∂</span>
                    <span>Full Screen</span>
                </button>
                <div class="dark-mode-control">
                    <span>üåô</span>
                    <div class="toggle-switch" id="requests-dark-mode-toggle">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                <a href="#" class="nav-item" id="requests-logout-link" style="padding:6px 10px; font-size:12px;">Logout</a>
            </div>
        </nav>
        <h2 class="requests-header">Lesson Requests</h2>
        
        <!-- ‚úÖ FILTRI AGGIUNTI -->
        <div class="requests-filters">
            <select id="requests-teacher-filter">
                <option value="all">All Teachers</option>
                <option value="Ms K Arakelian">Ms K Arakelian</option>
                <option value="Ms N Jenkins">Ms N Jenkins</option>
            </select>
            <div class="requests-summary" id="requests-summary"></div>
        </div>

        <div class="requests-list" id="requests-list-container"></div>
        <div class="requests-export">
            <button id="export-requests-csv">Export Requests (CSV)</button>
        </div>
    </div>
    <div class="dynamic-bg" id="dynamic-bg"></div>
    <div id="offline-banner">‚ö†Ô∏è You are offline. Some features may not work.</div>
    <div class="container">
        <div class="header-content-box">
            <div class="header">
                <div class="clock-section">
                    <div class="clock-title">St Thomas More Time</div>
                    <div class="clock-container">
                        <div class="clock-box">
                            <div class="clock-value" id="hours">00</div>
                            <div class="clock-label">Hours</div>
                        </div>
                        <div class="clock-box">
                            <div class="clock-value" id="minutes">00</div>
                            <div class="clock-label">Minutes</div>
                        </div>
                        <div class="clock-box">
                            <div class="clock-value" id="seconds">00</div>
                            <div class="clock-label">Seconds</div>
                        </div>
                    </div>
                    <div class="logged-in-user-box">
                        Logged in as: <span id="logged-in-user">Guest</span>
                    </div>
                </div>
                <div class="title-section">
                    <div class="title">Time Table 2025-2026</div>
                    <div class="date-info" id="date-info">Loading...</div>
                </div>
                <div class="countdown-section">
                    <div class="countdown-title-wrapper">
                        <div class="countdown-title-row">
                            <div class="countdown-title" id="countdown-title">October Half Term</div>
                            <div id="week-info">Current Week: A</div>
                        </div>
                    </div>
                    <div class="countdown-row">
                        <div class="countdown-box">
                            <div class="countdown-value" id="countdown-days">000</div>
                            <div class="clock-label">Days</div>
                        </div>
                        <div class="countdown-box">
                            <div class="countdown-value" id="countdown-hours">00</div>
                            <div class="clock-label">Hours</div>
                        </div>
                        <div class="countdown-box">
                            <div class="countdown-value" id="countdown-minutes">00</div>
                            <div class="clock-label">Minutes</div>
                        </div>
                        <div class="countdown-box">
                            <div class="countdown-value" id="countdown-seconds">00</div>
                            <div class="clock-label">Seconds</div>
                        </div>
                    </div>
                    <div class="countdown-lower-row">
                        <div class="term-info-box" id="term-info-box">
                            Loading...
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="now-context-bar" id="now-context-bar">
            <div id="now-summary-box" class="now-summary-box">
                <div class="now-summary-row">
                    <div class="now-summary-icon" id="now-summary-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                    </div>
                    <div class="now-summary-content" id="now-summary-content">
                        Loading...
                    </div>
                </div>
                <div class="now-summary-next" id="now-summary-next">
                </div>
            </div>
            <div id="progress-bar-container" class="progress-bar-container">
                <div class="progress-label" id="progress-label">--:-- left</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                    <div class="progress-overlay-text" id="progress-overlay-text">0:00</div>
                </div>
            </div>
        </div>
        <nav class="navbar">
            <div class="nav-main">
                <a href="#" class="nav-item" id="nav-home">
                    <div class="icon-wrapper">
                        <svg class="nav-icon home-icon" viewBox="0 0 100 100">
                            <path class="roof" d="M20,55 L50,25 L80,55" stroke-width="8" stroke-linecap="round" stroke-linejoin="round"/>
                            <rect x="30" y="55" width="40" height="25" rx="3" stroke-width="8"/>
                            <rect class="door" x="45" y="65" width="10" height="15" rx="2"/>
                        </svg>
                    </div>
                    <span>Home</span>
                </a>
                <a href="#" class="nav-item active" id="nav-timetable">
                    <div class="icon-wrapper">
                        <svg class="nav-icon timetable-icon" viewBox="0 0 100 100">
                            <rect class="page" x="15" y="20" width="70" height="60" rx="8" stroke-width="8"/>
                            <line x1="30" y1="35" x2="70" y2="35" stroke-width="4" stroke-linecap="round"/>
                            <line x1="30" y1="50" x2="70" y2="50" stroke-width="4" stroke-linecap="round"/>
                            <line x1="30" y1="65" x2="55" y2="65" stroke-width="4" stroke-linecap="round"/>
                            <circle cx="25" cy="35" r="4"/>
                            <circle cx="25" cy="50" r="4"/>
                            <circle cx="25" cy="65" r="4"/>
                        </svg>
                    </div>
                    <span id="nav-title">Timetable</span>
                </a>
                <a href="#" class="nav-item" id="nav-exam-clock">
                    <div class="icon-wrapper">
                        <svg class="nav-icon clock-icon" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="40" stroke-width="8"/>
                            <circle cx="50" cy="50" r="4"/>
                            <line class="hand" x1="50" y1="50" x2="50" y2="30" stroke-width="6" stroke-linecap="round"/>
                            <line x1="50" y1="50" x2="65" y2="50" stroke-width="4" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <span>Exam Clock</span>
                </a>
                <a href="#" class="nav-item" id="stats-nav">
                    <div class="icon-wrapper">
                        <svg class="nav-icon data-icon" viewBox="0 0 100 100">
                            <rect class="bar bar-1" x="25" y="70" width="6" height="0" rx="2"/>
                            <rect class="bar bar-2" x="38" y="70" width="6" height="0" rx="2"/>
                            <rect class="bar bar-3" x="51" y="70" width="6" height="0" rx="2"/>
                            <rect class="bar bar-4" x="64" y="70" width="6" height="0" rx="2"/>
                            <path d="M20,80 L80,80" stroke-width="4" stroke-linecap="round"/>
                            <path d="M20,80 L20,30" stroke-width="4" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <span>Statistics</span>
                </a>
                <a href="#" class="nav-item" id="reminders-nav">
                    <div class="icon-wrapper">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M16 4v4a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V4m8 16H8a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2z"/>
                            <path d="M9 12h6"/>
                            <path d="M9 16h6"/>
                        </svg>
                    </div>
                    <span>My Reminders</span>
                </a>
                <a href="#" class="nav-item" id="requests-nav" style="display:none;">
                    <div class="icon-wrapper">
                        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                            <line x1="16" y1="13" x2="8" y2="13"/>
                            <line x1="16" y1="17" x2="8" y2="17"/>
                            <polyline points="10 9 9 9 8 9"/>
                        </svg>
                    </div>
                    <span>Lesson Request</span>
                </a>
            </div>
            <div class="nav-controls">
                <select id="day-filter-select">
                    <option value="all">All Days</option>
                    <option value="MONDAY">Monday</option>
                    <option value="TUESDAY">Tuesday</option>
                    <option value="WEDNESDAY">Wednesday</option>
                    <option value="THURSDAY">Thursday</option>
                    <option value="FRIDAY">Friday</option>
                </select>
                <select id="week-selector">
                    <option value="auto">Automatic</option>
                    <option value="A">Week A</option>
                    <option value="B">Week B</option>
                </select>
                <button id="fullscreen-btn" class="fullscreen-btn">
                    <span>‚õ∂</span>
                    <span>Full Screen</span>
                </button>
                <div class="dark-mode-control">
                    <span>üåô</span>
                    <div class="toggle-switch" id="dark-mode-toggle">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                <a href="#" class="nav-item" id="logout-link" style="padding:6px 10px; font-size:12px;">Logout</a>
            </div>
        </nav>
        <div class="main-content">
            <div class="timetable-container">
                <table id="timetable" class="timetable">
                </table>
            </div>
            <div class="lessons-sidebar">
                <div class="lessons-count-box">
                    <div class="lessons-count-header">
                        Lessons Until Half Term
                        <button id="refresh-lessons-btn" class="refresh-lessons-btn" title="Refresh Lessons">üîÑ</button>
                    </div>
                    <div id="term-end-date">‚Äî</div>
                    <div class="lessons-filter-controls">
                        <button class="filter-btn active" data-filter="all">All</button>
                        <button class="filter-btn" data-filter="month">This Month</button>
                        <button class="filter-btn" data-filter="week">This Week</button>
                        <button class="filter-btn" data-filter="day">Today</button>
                    </div>
                    <div class="lessons-count-table-wrapper">
                        <table class="lessons-count-table-header">
                            <thead>
                                <tr>
                                    <th>Class</th>
                                    <th>Arakelian</th>
                                    <th>Jenkins</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                        </table>
                        <div class="lessons-count-scrollable">
                            <table class="lessons-count-table">
                                <tbody id="lessons-count-tbody"></tbody>
                                <tfoot>
                                    <tr style="border-top:1px solid var(--border-color); font-weight:bold;">
                                        <td>TOTAL</td>
                                        <td id="arakelian-total">0</td>
                                        <td id="jenkins-total">0</td>
                                        <td id="lessons-total-count">0</td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="today-lessons-container">
                    <div class="today-lessons-header">Today's Lessons</div>
                    <div id="today-lessons-content">
                    </div>
                </div>
            </div>
            <div class="reminders-box" id="reminders-box">
                <div class="reminders-header">
                    My Reminders
                    <button id="clear-reminders-btn" class="reminders-btn secondary" title="Clear all reminders">üóëÔ∏è</button>
                </div>
                <div id="reminders-list">
                </div>
                <div class="reminders-actions">
                    <button id="export-reminders-btn" class="reminders-btn primary">Export CSV</button>
                </div>
            </div>
            <div class="statistics-box" id="statistics-box">
                <div class="statistics-header">
                    Lesson Statistics
                    <button id="refresh-stats-btn" class="refresh-stats-btn" title="Refresh Stats">üîÑ</button>
                </div>
                <div class="stat-row">
                    <span class="stat-label">
                        <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                        This Week:
                    </span>
                    <span class="stat-value" id="stat-week">0</span>
                    <div class="mini-progress-bar">
                        <div class="mini-progress-fill" id="progress-week" style="width: 0%;"></div>
                    </div>
                </div>
                <div class="stat-row">
                    <span class="stat-label">
                        <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M8 2v4M16 2v4M3 10h18M5 14h.01M12 14h.01M19 14h.01M8 18h8"/></svg>
                        This Month:
                    </span>
                    <span class="stat-value" id="stat-month">0</span>
                    <div class="mini-progress-bar">
                        <div class="mini-progress-fill" id="progress-month" style="width: 0%;"></div>
                    </div>
                </div>
                <div class="stat-row">
                    <span class="stat-label">
                        <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                        Until Half Term:
                    </span>
                    <span class="stat-value" id="stat-half-term">0</span>
                    <div class="mini-progress-bar">
                        <div class="mini-progress-fill" id="progress-half-term" style="width: 0%;"></div>
                    </div>
                </div>
                <div class="stat-row">
                    <span class="stat-label">
                        <svg class="stat-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                        Until Year End:
                    </span>
                    <span class="stat-value" id="stat-year-end">0</span>
                    <div class="mini-progress-bar">
                        <div class="mini-progress-fill" id="progress-year-end" style="width: 0%;"></div>
                    </div>
                </div>
                <div class="non-inclusive-dates-box" id="non-inclusive-dates-box">
                    <div class="non-inclusive-dates-header">Non Inclusive Dates</div>
                    <ul id="non-inclusive-dates-list" class="non-inclusive-dates-list">
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div id="lesson-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Lesson Details</div>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-row">
                    <span class="modal-label">Teacher:</span>
                    <span class="modal-value" id="modal-teacher">‚Äî</span>
                </div>
                <div class="modal-row">
                    <span class="modal-label">Subject:</span>
                    <span class="modal-value" id="modal-subject">‚Äî</span>
                </div>
                <div class="modal-row">
                    <span class="modal-label">Period:</span>
                    <span class="modal-value" id="modal-period">‚Äî</span>
                </div>
                <div class="modal-row">
                    <span class="modal-label">Time:</span>
                    <span class="modal-value" id="modal-time">‚Äî</span>
                </div>
                <div class="modal-row">
                    <span class="modal-label">Room:</span>
                    <span class="modal-value" id="modal-room">‚Äî</span>
                </div>
                <div class="modal-row">
                    <span class="modal-label">Remaining Lessons:</span>
                    <span class="modal-value" id="modal-remaining">‚Äî</span>
                </div>
                <div class="modal-row" id="request-row" style="display:none;">
                    <span class="modal-label">Request:</span>
                    <textarea class="modal-input" id="modal-request" rows="3" placeholder="Enter your lesson request..."></textarea>
                </div>
                <div class="reminder-added" id="reminder-added">‚úÖ Added to reminders</div>
            </div>
            <div class="modal-actions">
                <button class="modal-btn secondary" id="close-btn">Close</button>
                <button class="modal-btn primary" id="add-reminder-btn">Add to Reminders</button>
                <button class="modal-btn primary" id="save-request-btn" style="display:none;">Save Request</button>
            </div>
        </div>
    </div>
    <div class="version-badge" id="version-badge">ver.31111.02</div>
    
    <script src="script.js"></script>
</body>
</html>